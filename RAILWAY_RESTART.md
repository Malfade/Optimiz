# Инструкции по перезапуску сервиса в Railway

## Внесенные изменения

В проект были внесены следующие изменения для исправления ошибки:

1. **Улучшена инициализация клиента Anthropic API**:
   - Добавлена проверка и использование `create_client` вместо прямого конструктора
   - Это предотвращает ошибку с параметром `proxies`, который автоматически добавляется в Railway

2. **Procfile настроен для использования main.py**:
   - Используется `worker: python main.py` вместо последовательного запуска скриптов
   - main.py обеспечивает правильную последовательность инициализации патчей и библиотеки

## Как перезапустить сервис в Railway

1. **Загрузите обновленные файлы**:
   - Загрузите изменения в ваш репозиторий Git
   - Или обновите файлы напрямую через интерфейс Railway

2. **Перезапустите сервис**:
   - Войдите в панель управления Railway
   - Найдите ваш проект и сервис бота
   - Нажмите на кнопку "Redeploy" или "Restart"

3. **Проверьте логи**:
   - После перезапуска проверьте логи на наличие сообщения "Клиент Claude API успешно инициализирован через create_client"
   - Убедитесь в отсутствии ошибки "__init__() got an unexpected keyword argument 'proxies'"

## Примечания

- Вы можете также использовать команду `/help` в боте для проверки его работоспособности
- Если проблема сохраняется, проверьте актуальность версии библиотеки anthropic в requirements.txt
- В случае необходимости, обновите requirements.txt, указав точную версию safe_anthropic или anthropic_wrapper 