# Руководство по использованию утилит для OptimizationBot

В этом руководстве описаны дополнительные утилиты, которые помогут в управлении и обслуживании бота для оптимизации скриптов.

## Доступные утилиты

### 1. Проверка API ключа (`test_api_key.py` / `test_api.bat`)
Эта утилита проверяет, правильно ли настроен ваш API ключ Anthropic и способен ли он подключаться к API.

**Как использовать:**
- Запустите файл `test_api.bat` двойным кликом или
- Выполните команду `python test_api_key.py` в терминале

### 2. Обновление API ключа (`update_api_key.py` / `update_key.bat`)
Если вам нужно обновить ваш API ключ Anthropic, используйте эту утилиту. Она запросит новый ключ и обновит его в файле `.env`.

**Как использовать:**
- Запустите файл `update_key.bat` двойным кликом или
- Выполните команду `python update_api_key.py` в терминале

### 3. Исправление формата API ключа (`fix_env_key.py` / `fix_key.bat`)
В зависимости от версии библиотеки `anthropic`, требуется разный формат API ключа. Эта утилита автоматически определит нужный формат и исправит ваш ключ.

**Как использовать:**
- Запустите файл `fix_key.bat` двойным кликом или
- Выполните команду `python fix_env_key.py` в терминале

### 4. Единая панель утилит (`utils.bat`)
Для удобства был создан файл `utils.bat`, который предоставляет меню для запуска всех утилит и бота.

**Как использовать:**
- Запустите файл `utils.bat` двойным кликом
- Выберите нужную опцию в меню

## Решение распространенных проблем

### При запуске бота появляется ошибка, связанная с API ключом
1. Запустите утилиту проверки API ключа
2. Если показывает ошибку, убедитесь что у вас:
   - Действующий ключ API Anthropic
   - Правильно настроен файл `.env` с переменной `ANTHROPIC_API_KEY`
3. Запустите утилиту исправления формата API ключа
4. Если проблема не решена, обновите ключ API с помощью соответствующей утилиты

### Бот не отвечает или дает странные ответы
1. Проверьте журнал логов
2. Выполните тест API ключа
3. Убедитесь, что версия библиотеки `anthropic` в файле `requirements.txt` совместима с вашим ключом API

## Примечания по развертыванию
При развертывании бота на платформе Railway важно учесть следующее:
- В файле `railway.json` установите `numInstances: 1` для предотвращения ошибок дублирования
- Убедитесь, что переменные окружения правильно настроены в панели Railway
- Следуйте инструкциям в файле `DEPLOY_RAILWAY.md` 